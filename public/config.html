<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>玩家設定 - Never Ending Drum Party</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    /* 讓頁面剛好滿版且不會垂直滾動，並加入背景動態動畫 */
    html, body {
      height: 100vh;
      overflow: hidden;
      margin: 0;
      padding: 0;
      background: linear-gradient(270deg, #F0F4F8, #6C5CE7, #FDCC6E, #00B894);
      background-size: 800% 800%;
      animation: gradientAnimation 30s ease infinite;
    }
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--background-color);
    }
    /* 調整設定頁面的容器，確保它居中 */
    .config-container {
      margin: auto;
      width: 100%;
      max-width: 450px;
      padding: 30px 20px;
      background-color: var(--container-color);
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .config-container h2 {
      margin-bottom: 20px;
      color: var(--primary-color);
    }
    .form-section {
      margin-bottom: 30px;
    }
    .form-section label {
      font-weight: bold;
      text-align: left;
      display: block;
      margin-bottom: 8px;
    }
    .form-section input[type="text"] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      background-color: #f9f9f9;
      color: var(--text-color);
    }
    /* Carousel 區域 */
    .carousel-container {
      margin-bottom: 30px;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.5s ease;
    }
    .carousel-item {
      min-width: 100%;
      box-sizing: border-box;
      text-align: center;
      padding: 10px;
    }
    .carousel-item img {
      width: 80%;
      height: auto;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .instrument-info h3 {
      margin: 0;
      font-size: 1.2rem;
      color: var(--primary-color);
    }
    .instrument-info p {
      margin: 5px 0 0;
      font-size: 0.9rem;
      color: var(--text-color);
    }
    .carousel-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    .carousel-nav button {
      background-color: var(--primary-color);
      border: none;
      color: #fff;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .carousel-nav button:hover {
      background-color: var(--secondary-color);
    }
    /* 開始遊戲按鈕 */
    #startGameBtn {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      border-radius: 5px;
      background-color: var(--primary-color);
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #startGameBtn:hover {
      background-color: var(--secondary-color);
    }
  </style>
</head>
<body>
  <div class="config-container">
    <h2>玩家設定</h2>
    
    <!-- 玩家名稱輸入區 -->
    <div class="form-section">
      <label for="playerName">User Name</label>
      <input type="text" id="playerName" placeholder="請輸入玩家名稱" />
    </div>
    
    <!-- 樂器選擇 Carousel -->
    <div class="carousel-container">
      <div class="carousel-track">
        <!-- 樂器項目：底鼓 -->
        <div class="carousel-item" data-instrument="kick">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2ZmNTI1MiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5LaWNrPC90ZXh0Pjwvc3ZnPg==" alt="底鼓" />
          <div class="instrument-info">
            <h3>Base Drum</h3>
            <p>深沉且有力的節奏，提供強勁的節拍。</p>
          </div>
        </div>
        <!-- 樂器項目：小鼓 -->
        <div class="carousel-item" data-instrument="snare">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2ZmZWIzYiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5TbmFyPC90ZXh0Pjwvc3ZnPg==" alt="小鼓" />
          <div class="instrument-info">
            <h3>Snare Drum</h3>
            <p>清脆而有節奏感的敲擊聲，塑造細膩節奏。</p>
          </div>
        </div>
        <!-- 樂器項目：踩鑔 -->
        <div class="carousel-item" data-instrument="hihat">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iIzRjYWY1MCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5IaGlIaWF0PC90ZXh0Pjwvc3ZnPg==" alt="踩鑔" />
          <div class="instrument-info">
            <h3>Hihat</h3>
            <p>迅速而清脆的音符，增添節奏的流動性。</p>
          </div>
        </div>
        <!-- 樂器項目：嗵鼓 -->
        <div class="carousel-item" data-instrument="tom">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iIzIxOTZmMyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Ub208L3RleHQ+PC9zdmc+" alt="嗵鼓" />
          <div class="instrument-info">
            <h3>Tom</h3>
            <p>中低頻的共鳴，給予音樂豐富層次感。</p>
          </div>
        </div>
        <!-- 樂器項目：鈸 -->
        <div class="carousel-item" data-instrument="crash">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2UwNDBmYiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5DcmFzaDwvdGV4dD48L3N2Zz4=" alt="鈸" />
          <div class="instrument-info">
            <h3>Crash</h3>
            <p>明亮且震撼的打擊，適合作為強調音效。</p>
          </div>
        </div>
      </div>
      <!-- Carousel 導航按鈕 -->
      <div class="carousel-nav">
        <button id="prevBtn">&lt;</button>
        <button id="nextBtn">&gt;</button>
      </div>
    </div>
    
    <!-- 儲存當前選取的樂器 -->
    <input type="hidden" id="selectedInstrument" value="kick" />
    
    <button id="startGameBtn">Join Session</button>
  </div>

  <script>
    // Carousel 功能
    const track = document.querySelector('.carousel-track');
    const items = Array.from(track.children);
    const prevButton = document.getElementById('prevBtn');
    const nextButton = document.getElementById('nextBtn');
    const selectedInstrumentInput = document.getElementById('selectedInstrument');
    let currentIndex = 0;

    function updateCarousel() {
      const slideWidth = items[0].getBoundingClientRect().width;
      track.style.transform = 'translateX(-' + (slideWidth * currentIndex) + 'px)';
      // 更新隱藏的 input 內容
      const currentItem = items[currentIndex];
      selectedInstrumentInput.value = currentItem.getAttribute('data-instrument');
    }

    nextButton.addEventListener('click', () => {
      if (currentIndex < items.length - 1) {
        currentIndex++;
        updateCarousel();
      }
    });

    prevButton.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateCarousel();
      }
    });

    // 支援觸控滑動
    let startX;
    track.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });
    track.addEventListener('touchmove', (e) => {
      if (!startX) return;
      let moveX = e.touches[0].clientX;
      let diff = startX - moveX;
      if (diff > 50 && currentIndex < items.length - 1) {
        currentIndex++;
        updateCarousel();
        startX = null;
      } else if (diff < -50 && currentIndex > 0) {
        currentIndex--;
        updateCarousel();
        startX = null;
      }
    });

    // 開始遊戲按鈕事件
    document.getElementById('startGameBtn').addEventListener('click', () => {
      const playerName = document.getElementById('playerName').value.trim();
      if (!playerName) {
         alert("請輸入玩家名稱");
         return;
      }
      // 儲存玩家名稱與選取的樂器到 localStorage
      const instrument = selectedInstrumentInput.value;
      localStorage.setItem('playerName', playerName);
      localStorage.setItem('instrument', instrument);
      // 導向遊戲頁面（例如 game.html）
      window.location.href = '/game.html';
    });
  </script>
</body>
</html>